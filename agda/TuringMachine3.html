<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>TuringMachine3</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="TuringMachine3.html" class="Module">TuringMachine3</a> <a id="23" class="Keyword">where</a>

<a id="30" class="Keyword">open</a> <a id="35" class="Keyword">import</a> <a id="42" href="Basic.html" class="Module">Basic</a> <a id="48" class="Keyword">hiding</a> <a id="55" class="Symbol">(</a><a id="56" href="Data.Fin.Base.html#2329" class="Function">raise</a><a id="61" class="Symbol">)</a> <a id="63" class="Keyword">renaming</a> <a id="72" class="Symbol">(</a><a id="73" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a> <a id="75" class="Symbol">to</a> <a id="Builtin.Nat.Nat"></a><a id="78" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="81" class="Symbol">)</a>
<a id="83" class="Keyword">open</a> <a id="88" class="Keyword">import</a> <a id="95" href="Util.Arithmetic.html" class="Module">Util.Arithmetic</a>
<a id="111" class="Keyword">open</a> <a id="116" class="Keyword">import</a> <a id="123" href="Util.BoolProp.html" class="Module">Util.BoolProp</a>
<a id="137" class="Keyword">open</a> <a id="142" class="Keyword">import</a> <a id="149" href="Util.DependentIf.html" class="Module">Util.DependentIf</a>
<a id="166" class="Keyword">open</a> <a id="171" class="Keyword">import</a> <a id="178" href="Util.Fin.html" class="Module">Util.Fin</a> <a id="187" class="Keyword">renaming</a> <a id="196" class="Symbol">(</a><a id="197" href="Util.Fin.html#201" class="Function">Fin-raise&#39;</a> <a id="208" class="Symbol">to</a> <a id="Fin.Fin-raise&#39;"></a><a id="211" href="TuringMachine3.html#211" class="Function">raise</a><a id="216" class="Symbol">)</a>
<a id="218" class="Keyword">open</a> <a id="223" class="Keyword">import</a> <a id="230" href="Util.List.html" class="Module">Util.List</a>

<a id="241" class="Comment">{-
  This represents the instructions for an individual transition
   * next state           : Fin states
   * symbol to write      : Fin symbols
   * move left or right   : Bool
-}</a>
<a id="TM-transition"></a><a id="423" href="TuringMachine3.html#423" class="Function">TM-transition</a> <a id="437" class="Symbol">:</a> <a id="439" class="Symbol">(</a><a id="440" href="TuringMachine3.html#440" class="Bound">states</a> <a id="447" href="TuringMachine3.html#447" class="Bound">symbols</a> <a id="455" class="Symbol">:</a> <a id="457" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="460" class="Symbol">)</a> <a id="462" class="Symbol">→</a> <a id="464" class="PrimitiveType">Set</a>
<a id="468" href="TuringMachine3.html#423" class="Function">TM-transition</a> <a id="482" href="TuringMachine3.html#482" class="Bound">states</a> <a id="489" href="TuringMachine3.html#489" class="Bound">symbols</a> <a id="497" class="Symbol">=</a> <a id="499" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="503" href="TuringMachine3.html#482" class="Bound">states</a> <a id="510" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="512" class="Symbol">(</a><a id="513" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="517" href="TuringMachine3.html#489" class="Bound">symbols</a> <a id="525" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="527" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="531" class="Symbol">)</a>




<a id="537" class="Comment">{-
  This represents the actions that can result from an input (state , symbol) pair
  
  Either:
   * `just` the transition to take in the case of non-halting
  OR
   * `nothing` to represent halting
-}</a>
<a id="TM-action"></a><a id="741" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="751" class="Symbol">:</a> <a id="753" class="Symbol">(</a><a id="754" href="TuringMachine3.html#754" class="Bound">states</a> <a id="761" href="TuringMachine3.html#761" class="Bound">symbols</a> <a id="769" class="Symbol">:</a> <a id="771" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="774" class="Symbol">)</a> <a id="776" class="Symbol">→</a> <a id="778" class="PrimitiveType">Set</a>
<a id="782" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="792" href="TuringMachine3.html#792" class="Bound">states</a> <a id="799" href="TuringMachine3.html#799" class="Bound">symbols</a> <a id="807" class="Symbol">=</a> <a id="809" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="815" class="Symbol">(</a><a id="816" href="TuringMachine3.html#423" class="Function">TM-transition</a> <a id="830" href="TuringMachine3.html#792" class="Bound">states</a> <a id="837" href="TuringMachine3.html#799" class="Bound">symbols</a><a id="844" class="Symbol">)</a>





<a id="851" class="Comment">{-
  This represents a full transition function:

  Input:
    * state               : Fin states
    * symbol              : Fin symbols
  Output:
    * next state          : Fin states
    * symbol to write     : Fin symbols
    * move left or right  : Bool
  
  If there is no transition for a given (state , symbol) pair then the function returns `nothing`,
  which represents that the machine halts.
-}</a>
<a id="TM"></a><a id="1259" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="1262" class="Symbol">:</a> <a id="1264" class="Symbol">(</a><a id="1265" href="TuringMachine3.html#1265" class="Bound">states</a> <a id="1272" href="TuringMachine3.html#1272" class="Bound">symbols</a> <a id="1280" class="Symbol">:</a> <a id="1282" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="1285" class="Symbol">)</a> <a id="1287" class="Symbol">→</a> <a id="1289" class="PrimitiveType">Set</a>
<a id="1293" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="1296" href="TuringMachine3.html#1296" class="Bound">states</a> <a id="1303" href="TuringMachine3.html#1303" class="Bound">symbols</a> <a id="1311" class="Symbol">=</a> <a id="1313" class="Symbol">(</a><a id="1314" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1318" href="TuringMachine3.html#1296" class="Bound">states</a><a id="1324" class="Symbol">)</a> <a id="1326" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1328" class="Symbol">(</a><a id="1329" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1333" href="TuringMachine3.html#1303" class="Bound">symbols</a><a id="1340" class="Symbol">)</a> <a id="1342" class="Symbol">→</a> <a id="1344" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="1354" href="TuringMachine3.html#1296" class="Bound">states</a> <a id="1361" href="TuringMachine3.html#1303" class="Bound">symbols</a>





<a id="1374" class="Comment">{-
  This represents a particular configuration of the machine
  n = # of states
  m = # of symbols

  * state        : Fin n
  * tape         : List (Fin m)  -- cells beyond the end of the list are implicitly blank
  * position     : Nat

-}</a>
<a id="TM-δ-config"></a><a id="1617" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="1629" class="Symbol">:</a> <a id="1631" class="Symbol">(</a><a id="1632" href="TuringMachine3.html#1632" class="Bound">n</a> <a id="1634" href="TuringMachine3.html#1634" class="Bound">m</a> <a id="1636" class="Symbol">:</a> <a id="1638" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="1641" class="Symbol">)</a> <a id="1643" class="Symbol">→</a> <a id="1645" class="PrimitiveType">Set</a>
<a id="1649" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="1661" href="TuringMachine3.html#1661" class="Bound">n</a> <a id="1663" href="TuringMachine3.html#1663" class="Bound">m</a> <a id="1665" class="Symbol">=</a> <a id="1667" class="Symbol">(</a><a id="1668" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1672" href="TuringMachine3.html#1661" class="Bound">n</a><a id="1673" class="Symbol">)</a> <a id="1675" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1677" class="Symbol">((</a><a id="1679" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1684" class="Symbol">(</a><a id="1685" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="1689" href="TuringMachine3.html#1663" class="Bound">m</a><a id="1690" class="Symbol">))</a> <a id="1693" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1695" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="1698" class="Symbol">)</a>




<a id="1704" class="Comment">{-
  This represents the outputs that can result from a particular transition
  n = # of states
  m = # of symbols

  if there is a transition for a (state , symbol) pair then the transition results in:
   * next state          : Fin n
   * resulting tape      : List (Fin m)
   * next position       : Nat

  otherwise the transition just returns the current tape : List (Fin m)
-}</a>
<a id="TM-δ-output"></a><a id="2087" href="TuringMachine3.html#2087" class="Function">TM-δ-output</a> <a id="2099" class="Symbol">:</a> <a id="2101" class="Symbol">(</a><a id="2102" href="TuringMachine3.html#2102" class="Bound">n</a> <a id="2104" href="TuringMachine3.html#2104" class="Bound">m</a> <a id="2106" class="Symbol">:</a> <a id="2108" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="2111" class="Symbol">)</a> <a id="2113" class="Symbol">→</a> <a id="2115" class="PrimitiveType">Set</a>
<a id="2119" href="TuringMachine3.html#2087" class="Function">TM-δ-output</a> <a id="2131" href="TuringMachine3.html#2131" class="Bound">n</a> <a id="2133" href="TuringMachine3.html#2133" class="Bound">m</a> <a id="2135" class="Symbol">=</a> <a id="2137" class="Symbol">(</a><a id="2138" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="2150" href="TuringMachine3.html#2131" class="Bound">n</a> <a id="2152" href="TuringMachine3.html#2133" class="Bound">m</a><a id="2153" class="Symbol">)</a> <a id="2155" href="Data.Sum.Base.html#734" class="Datatype Operator">⊎</a> <a id="2157" class="Symbol">(</a><a id="2158" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2163" class="Symbol">(</a><a id="2164" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2168" href="TuringMachine3.html#2133" class="Bound">m</a><a id="2169" class="Symbol">))</a>






<a id="2178" class="Comment">{-
  This represents a particular configuration of the machine
-}</a>
<a id="2244" class="Keyword">record</a> <a id="TM-state"></a><a id="2251" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="2260" class="Symbol">(</a><a id="2261" href="TuringMachine3.html#2261" class="Bound">n</a> <a id="2263" href="TuringMachine3.html#2263" class="Bound">m</a> <a id="2265" class="Symbol">:</a> <a id="2267" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="2270" class="Symbol">)</a> <a id="2272" class="Symbol">:</a> <a id="2274" class="PrimitiveType">Set</a> <a id="2278" class="Keyword">where</a>
  <a id="2286" class="Keyword">field</a>
    <a id="TM-state.state"></a><a id="2296" href="TuringMachine3.html#2296" class="Field">state</a> <a id="2302" class="Symbol">:</a> <a id="2304" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2308" href="TuringMachine3.html#2261" class="Bound">n</a>
    <a id="TM-state.tape"></a><a id="2314" href="TuringMachine3.html#2314" class="Field">tape</a> <a id="2319" class="Symbol">:</a> <a id="2321" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="2326" class="Symbol">(</a><a id="2327" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="2331" href="TuringMachine3.html#2263" class="Bound">m</a><a id="2332" class="Symbol">)</a>
    <a id="TM-state.pos"></a><a id="2338" href="TuringMachine3.html#2338" class="Field">pos</a> <a id="2342" class="Symbol">:</a> <a id="2344" href="TuringMachine3.html#78" class="Datatype">Nat</a>
    <a id="TM-state.halted"></a><a id="2352" href="TuringMachine3.html#2352" class="Field">halted</a> <a id="2359" class="Symbol">:</a> <a id="2361" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>






<a id="2372" class="Comment">{-
  This applies a TM-transition to a configuration to get a new configuration
  n = # states
  1 + m = # symbols

  Inputs:
   * current configuration   : TM-δ-config n (1 + m)
   * action to apply         : TM-action n (1 + m)

  Output:
   * resulting configuration : TM-δ-config n (1 + m)

  TODO: does the # of symbols have to be nonzero?
-}</a>
<a id="TM-apply-transition"></a><a id="2720" href="TuringMachine3.html#2720" class="Function">TM-apply-transition</a> <a id="2740" class="Symbol">:</a> <a id="2742" class="Symbol">{</a><a id="2743" href="TuringMachine3.html#2743" class="Bound">n</a> <a id="2745" href="TuringMachine3.html#2745" class="Bound">m</a> <a id="2747" class="Symbol">:</a> <a id="2749" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="2752" class="Symbol">}</a> <a id="2754" class="Symbol">→</a> <a id="2756" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="2768" href="TuringMachine3.html#2743" class="Bound">n</a> <a id="2770" class="Symbol">(</a><a id="2771" class="Number">1</a> <a id="2773" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2775" href="TuringMachine3.html#2745" class="Bound">m</a><a id="2776" class="Symbol">)</a> <a id="2778" class="Symbol">→</a> <a id="2780" href="TuringMachine3.html#423" class="Function">TM-transition</a> <a id="2794" href="TuringMachine3.html#2743" class="Bound">n</a> <a id="2796" class="Symbol">(</a><a id="2797" class="Number">1</a> <a id="2799" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2801" href="TuringMachine3.html#2745" class="Bound">m</a><a id="2802" class="Symbol">)</a> <a id="2804" class="Symbol">→</a> <a id="2806" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="2818" href="TuringMachine3.html#2743" class="Bound">n</a> <a id="2820" class="Symbol">(</a><a id="2821" class="Number">1</a> <a id="2823" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="2825" href="TuringMachine3.html#2745" class="Bound">m</a><a id="2826" class="Symbol">)</a>
<a id="2828" href="TuringMachine3.html#2720" class="Function">TM-apply-transition</a> <a id="2848" class="Symbol">(_</a> <a id="2851" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2853" class="Symbol">(</a><a id="2854" href="TuringMachine3.html#2854" class="Bound">tape</a> <a id="2859" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2861" href="TuringMachine3.html#2861" class="Bound">pos</a><a id="2864" class="Symbol">))</a> <a id="2867" class="Symbol">(</a><a id="2868" href="TuringMachine3.html#2868" class="Bound">new-state</a> <a id="2878" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2880" class="Symbol">(</a><a id="2881" href="TuringMachine3.html#2881" class="Bound">write</a> <a id="2887" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2889" href="TuringMachine3.html#2889" class="Bound">LR</a><a id="2891" class="Symbol">))</a> <a id="2894" class="Symbol">=</a> <a id="2896" class="Symbol">(</a><a id="2897" href="TuringMachine3.html#2868" class="Bound">new-state</a> <a id="2907" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2909" class="Symbol">(</a><a id="2910" href="TuringMachine3.html#2996" class="Function">new-tape</a> <a id="2919" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2921" href="TuringMachine3.html#2944" class="Function">new-pos</a><a id="2928" class="Symbol">))</a>
  <a id="2933" class="Keyword">where</a>
     <a id="2944" href="TuringMachine3.html#2944" class="Function">new-pos</a> <a id="2952" class="Symbol">=</a> <a id="2954" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="2957" href="TuringMachine3.html#2889" class="Bound">LR</a> <a id="2960" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="2965" class="Symbol">(</a><a id="2966" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="2970" href="TuringMachine3.html#2861" class="Bound">pos</a><a id="2973" class="Symbol">)</a> <a id="2975" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="2980" class="Symbol">(</a><a id="2981" href="Data.Nat.Base.html#2880" class="Function">pred</a> <a id="2986" href="TuringMachine3.html#2861" class="Bound">pos</a><a id="2989" class="Symbol">)</a>
     <a id="2996" href="TuringMachine3.html#2996" class="Function">new-tape</a> <a id="3005" class="Symbol">=</a>
       <a id="3014" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="3017" class="Symbol">(</a><a id="3018" href="TuringMachine3.html#2861" class="Bound">pos</a> <a id="3022" href="Util.Arithmetic.html#699" class="Function Operator">ge</a> <a id="3025" class="Symbol">(</a><a id="3026" href="Data.List.Base.html#4864" class="Function">length</a> <a id="3033" href="TuringMachine3.html#2854" class="Bound">tape</a><a id="3037" class="Symbol">))</a> <a id="3040" href="Data.Bool.Base.html#1283" class="Function Operator">then</a>
         <a id="3054" class="Symbol">(</a><a id="3055" href="TuringMachine3.html#2881" class="Bound">write</a> <a id="3061" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3063" href="TuringMachine3.html#2854" class="Bound">tape</a><a id="3067" class="Symbol">)</a>
       <a id="3076" href="Data.Bool.Base.html#1283" class="Function Operator">else</a>
         <a id="3090" class="Symbol">(</a><a id="3091" href="Util.List.html#746" class="Function">set</a> <a id="3095" href="TuringMachine3.html#2854" class="Bound">tape</a> <a id="3100" href="TuringMachine3.html#2861" class="Bound">pos</a> <a id="3104" href="TuringMachine3.html#2881" class="Bound">write</a><a id="3109" class="Symbol">)</a>



<a id="3114" class="Comment">{-
  This applies a TM-action to a configuration to get a new configuration or output tape in the case
  that there is no TM-transition

  n = # of states
  1 + m = # of symbols

  Inputs:
   * current configuration                  : TM-δ-config n (1 + m)
   * possible action                        : Maybe (TM-action n (1 + m)) 

  Outputs either:
   * resulting configuration                : TM-δ-config n (1 + m)
  OR
   * output tape                            : List (Fin (1 + m))
-}</a>
<a id="TM-apply-δ"></a><a id="3606" href="TuringMachine3.html#3606" class="Function">TM-apply-δ</a> <a id="3617" class="Symbol">:</a> <a id="3619" class="Symbol">{</a><a id="3620" href="TuringMachine3.html#3620" class="Bound">n</a> <a id="3622" href="TuringMachine3.html#3622" class="Bound">m</a> <a id="3624" class="Symbol">:</a> <a id="3626" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="3629" class="Symbol">}</a> <a id="3631" class="Symbol">→</a> <a id="3633" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="3645" href="TuringMachine3.html#3620" class="Bound">n</a> <a id="3647" class="Symbol">(</a><a id="3648" class="Number">1</a> <a id="3650" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="3652" href="TuringMachine3.html#3622" class="Bound">m</a><a id="3653" class="Symbol">)</a> <a id="3655" class="Symbol">→</a> <a id="3657" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="3667" href="TuringMachine3.html#3620" class="Bound">n</a> <a id="3669" class="Symbol">(</a><a id="3670" class="Number">1</a> <a id="3672" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="3674" href="TuringMachine3.html#3622" class="Bound">m</a><a id="3675" class="Symbol">)</a> <a id="3677" class="Symbol">→</a> <a id="3679" href="TuringMachine3.html#2087" class="Function">TM-δ-output</a> <a id="3691" href="TuringMachine3.html#3620" class="Bound">n</a> <a id="3693" class="Symbol">(</a><a id="3694" class="Number">1</a> <a id="3696" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="3698" href="TuringMachine3.html#3622" class="Bound">m</a><a id="3699" class="Symbol">)</a>
<a id="3701" href="TuringMachine3.html#3606" class="Function">TM-apply-δ</a> <a id="3712" class="Symbol">(_</a> <a id="3715" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3717" class="Symbol">(</a><a id="3718" href="TuringMachine3.html#3718" class="Bound">tape</a> <a id="3723" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3725" class="Symbol">_))</a>  <a id="3730" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a> <a id="3738" class="Symbol">=</a> <a id="3740" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="3745" href="TuringMachine3.html#3718" class="Bound">tape</a>
<a id="3750" href="TuringMachine3.html#3606" class="Function">TM-apply-δ</a> <a id="3761" href="TuringMachine3.html#3761" class="Bound">condition</a> <a id="3771" class="Symbol">(</a><a id="3772" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="3777" href="TuringMachine3.html#3777" class="Bound">δ</a><a id="3778" class="Symbol">)</a> <a id="3780" class="Symbol">=</a> <a id="3782" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="3787" class="Symbol">(</a><a id="3788" href="TuringMachine3.html#2720" class="Function">TM-apply-transition</a> <a id="3808" href="TuringMachine3.html#3761" class="Bound">condition</a> <a id="3818" href="TuringMachine3.html#3777" class="Bound">δ</a><a id="3819" class="Symbol">)</a>




<a id="3825" class="Comment">{-
  This runs a TM for one step on a particular configuration to get a new configuration or output tape in the
  case of halting.

  n = # of states
  m = # of symbols

  Inputs:
   * the Turing machine to run             : TM n m
   * current configuration                 : TM-δ-config n m

  Outputs either:
   * resulting configuration               : TM-δ-config n m
  OR
   * output tape                           : List (Fin (1 + m))
-}</a>
<a id="TM-step"></a><a id="4270" href="TuringMachine3.html#4270" class="Function">TM-step</a> <a id="4278" class="Symbol">:</a> <a id="4280" class="Symbol">{</a><a id="4281" href="TuringMachine3.html#4281" class="Bound">n</a> <a id="4283" href="TuringMachine3.html#4283" class="Bound">m</a> <a id="4285" class="Symbol">:</a> <a id="4287" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="4290" class="Symbol">}</a> <a id="4292" class="Symbol">→</a> <a id="4294" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="4297" href="TuringMachine3.html#4281" class="Bound">n</a> <a id="4299" href="TuringMachine3.html#4283" class="Bound">m</a> <a id="4301" class="Symbol">→</a> <a id="4303" href="TuringMachine3.html#1617" class="Function">TM-δ-config</a> <a id="4315" href="TuringMachine3.html#4281" class="Bound">n</a> <a id="4317" href="TuringMachine3.html#4283" class="Bound">m</a> <a id="4319" class="Symbol">→</a> <a id="4321" href="TuringMachine3.html#2087" class="Function">TM-δ-output</a> <a id="4333" href="TuringMachine3.html#4281" class="Bound">n</a> <a id="4335" href="TuringMachine3.html#4283" class="Bound">m</a>
<a id="4337" href="TuringMachine3.html#4270" class="Function">TM-step</a> <a id="4345" class="Symbol">{</a><a id="4346" href="TuringMachine3.html#4346" class="Bound">n</a><a id="4347" class="Symbol">}</a> <a id="4349" class="Symbol">{</a><a id="4350" class="Number">0</a><a id="4351" class="Symbol">}</a> <a id="4353" href="TuringMachine3.html#4353" class="Bound">tm</a> <a id="4356" class="Symbol">(</a><a id="4357" href="TuringMachine3.html#4357" class="Bound">state</a> <a id="4363" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4365" class="Symbol">(</a><a id="4366" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="4369" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4371" href="TuringMachine3.html#4371" class="Bound">pos</a><a id="4374" class="Symbol">))</a> <a id="4377" class="Symbol">=</a> <a id="4379" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="4384" class="Symbol">(</a><a id="4385" href="TuringMachine3.html#4357" class="Bound">state</a> <a id="4391" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4393" class="Symbol">(</a><a id="4394" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="4397" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4399" href="TuringMachine3.html#4371" class="Bound">pos</a><a id="4402" class="Symbol">))</a>
<a id="4405" href="TuringMachine3.html#4270" class="Function">TM-step</a> <a id="4413" class="Symbol">{</a><a id="4414" href="TuringMachine3.html#4414" class="Bound">n</a><a id="4415" class="Symbol">}</a> <a id="4417" class="Symbol">{</a><a id="4418" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="4422" href="TuringMachine3.html#4422" class="Bound">m</a><a id="4423" class="Symbol">}</a> <a id="4425" href="TuringMachine3.html#4425" class="Bound">tm</a> <a id="4428" href="TuringMachine3.html#4428" class="Bound">condition</a><a id="4437" class="Symbol">@(</a><a id="4439" href="TuringMachine3.html#4439" class="Bound">state</a> <a id="4445" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4447" class="Symbol">(</a><a id="4448" href="TuringMachine3.html#4448" class="Bound">tape</a> <a id="4453" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4455" href="TuringMachine3.html#4455" class="Bound">pos</a><a id="4458" class="Symbol">))</a> <a id="4461" class="Symbol">=</a> <a id="4463" href="TuringMachine3.html#3606" class="Function">TM-apply-δ</a> <a id="4474" href="TuringMachine3.html#4428" class="Bound">condition</a> <a id="4484" href="TuringMachine3.html#4499" class="Function">δ</a> 
  <a id="4489" class="Keyword">where</a>
    <a id="4499" href="TuringMachine3.html#4499" class="Function">δ</a> <a id="4501" class="Symbol">=</a> <a id="4503" href="TuringMachine3.html#4425" class="Bound">tm</a> <a id="4506" class="Symbol">(</a><a id="4507" href="TuringMachine3.html#4439" class="Bound">state</a> <a id="4513" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4515" class="Symbol">(</a><a id="4516" href="Util.List.html#656" class="Function">get-default</a> <a id="4528" href="Data.Fin.Base.html#1148" class="InductiveConstructor">zero</a> <a id="4533" href="TuringMachine3.html#4448" class="Bound">tape</a> <a id="4538" href="TuringMachine3.html#4455" class="Bound">pos</a><a id="4541" class="Symbol">))</a>




<a id="4548" class="Comment">{-
  This updates a TM-state with the results of a TM-action to get a new TM-state
  
  n = # of states
  m = # of symbols

  Inputs:
   * current state     : TM-state n m
   * action output     : TM-δ-output n m

  Outputs:
   * new state         : TM-state n m
-}</a>
<a id="TM-apply-step"></a><a id="4814" href="TuringMachine3.html#4814" class="Function">TM-apply-step</a> <a id="4828" class="Symbol">:</a> <a id="4830" class="Symbol">{</a><a id="4831" href="TuringMachine3.html#4831" class="Bound">n</a> <a id="4833" href="TuringMachine3.html#4833" class="Bound">m</a> <a id="4835" class="Symbol">:</a> <a id="4837" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="4840" class="Symbol">}</a> <a id="4842" class="Symbol">→</a> <a id="4844" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="4853" href="TuringMachine3.html#4831" class="Bound">n</a> <a id="4855" href="TuringMachine3.html#4833" class="Bound">m</a> <a id="4857" class="Symbol">→</a> <a id="4859" href="TuringMachine3.html#2087" class="Function">TM-δ-output</a> <a id="4871" href="TuringMachine3.html#4831" class="Bound">n</a> <a id="4873" href="TuringMachine3.html#4833" class="Bound">m</a> <a id="4875" class="Symbol">→</a> <a id="4877" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="4886" href="TuringMachine3.html#4831" class="Bound">n</a> <a id="4888" href="TuringMachine3.html#4833" class="Bound">m</a>
<a id="4890" href="TuringMachine3.html#4814" class="Function">TM-apply-step</a> <a id="4904" class="Symbol">{</a><a id="4905" href="TuringMachine3.html#4905" class="Bound">n</a><a id="4906" class="Symbol">}</a> <a id="4908" class="Symbol">{</a><a id="4909" href="TuringMachine3.html#4909" class="Bound">m</a><a id="4910" class="Symbol">}</a> <a id="4912" href="TuringMachine3.html#4912" class="Bound">s₁</a> <a id="4915" class="Symbol">(</a><a id="4916" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="4921" class="Symbol">(</a><a id="4922" href="TuringMachine3.html#4922" class="Bound">new-state</a> <a id="4932" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4934" class="Symbol">(</a><a id="4935" href="TuringMachine3.html#4935" class="Bound">new-tape</a> <a id="4944" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4946" href="TuringMachine3.html#4946" class="Bound">new-pos</a><a id="4953" class="Symbol">)))</a> <a id="4957" class="Symbol">=</a>
      <a id="4965" class="Keyword">record</a> <a id="4972" class="Symbol">{</a>
        <a id="4982" href="TuringMachine3.html#2296" class="Field">state</a> <a id="4988" class="Symbol">=</a> <a id="4990" href="TuringMachine3.html#4922" class="Bound">new-state</a> <a id="5000" class="Symbol">;</a>
        <a id="5010" href="TuringMachine3.html#2314" class="Field">tape</a> <a id="5015" class="Symbol">=</a> <a id="5017" href="TuringMachine3.html#4935" class="Bound">new-tape</a> <a id="5026" class="Symbol">;</a>
        <a id="5036" href="TuringMachine3.html#2338" class="Field">pos</a> <a id="5040" class="Symbol">=</a> <a id="5042" href="TuringMachine3.html#4946" class="Bound">new-pos</a> <a id="5050" class="Symbol">;</a>
        <a id="5060" href="TuringMachine3.html#2352" class="Field">halted</a> <a id="5067" class="Symbol">=</a> <a id="5069" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
      <a id="5081" class="Symbol">}</a>
<a id="5083" href="TuringMachine3.html#4814" class="Function">TM-apply-step</a> <a id="5097" class="Symbol">{</a><a id="5098" href="TuringMachine3.html#5098" class="Bound">n</a><a id="5099" class="Symbol">}</a> <a id="5101" class="Symbol">{</a><a id="5102" href="TuringMachine3.html#5102" class="Bound">m</a><a id="5103" class="Symbol">}</a> <a id="5105" href="TuringMachine3.html#5105" class="Bound">s₁</a> <a id="5108" class="Symbol">(</a><a id="5109" href="Data.Sum.Base.html#809" class="InductiveConstructor">inj₂</a> <a id="5114" href="TuringMachine3.html#5114" class="Bound">x</a><a id="5115" class="Symbol">)</a> <a id="5117" class="Symbol">=</a> <a id="5119" href="TuringMachine3.html#5159" class="Function">output</a>
  <a id="5128" class="Keyword">where</a>
    <a id="5138" class="Keyword">open</a> <a id="5143" href="TuringMachine3.html#2251" class="Module">TM-state</a> <a id="5152" href="TuringMachine3.html#5105" class="Bound">s₁</a>
    <a id="5159" href="TuringMachine3.html#5159" class="Function">output</a> <a id="5166" class="Symbol">=</a> <a id="5168" class="Keyword">record</a> <a id="5175" class="Symbol">{</a>
        <a id="5185" href="TuringMachine3.html#2296" class="Field">state</a> <a id="5191" class="Symbol">=</a> <a id="5193" href="TuringMachine3.html#2296" class="Function">state</a> <a id="5199" class="Symbol">;</a>
        <a id="5209" href="TuringMachine3.html#2314" class="Field">tape</a> <a id="5214" class="Symbol">=</a> <a id="5216" href="TuringMachine3.html#5114" class="Bound">x</a> <a id="5218" class="Symbol">;</a>
        <a id="5228" href="TuringMachine3.html#2338" class="Field">pos</a> <a id="5232" class="Symbol">=</a> <a id="5234" href="TuringMachine3.html#2338" class="Function">pos</a> <a id="5238" class="Symbol">;</a>
        <a id="5248" href="TuringMachine3.html#2352" class="Field">halted</a> <a id="5255" class="Symbol">=</a> <a id="5257" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a>
      <a id="5268" class="Symbol">}</a>



<a id="5273" class="Comment">{-
  This runs a TM for one step on a TM-state to get a new TM-state
  n = # of states
  m = # of symbols

  Inputs:
   * Turing machine      : TM n m
   * current state       : TM-state n m

  Outputs:
   * next state          : TM-state n m
-}</a>
<a id="TM-step-state"></a><a id="5519" href="TuringMachine3.html#5519" class="Function">TM-step-state</a> <a id="5533" class="Symbol">:</a> <a id="5535" class="Symbol">{</a><a id="5536" href="TuringMachine3.html#5536" class="Bound">n</a> <a id="5538" href="TuringMachine3.html#5538" class="Bound">m</a> <a id="5540" class="Symbol">:</a> <a id="5542" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="5545" class="Symbol">}</a> <a id="5547" class="Symbol">→</a> <a id="5549" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="5552" href="TuringMachine3.html#5536" class="Bound">n</a> <a id="5554" href="TuringMachine3.html#5538" class="Bound">m</a> <a id="5556" class="Symbol">→</a> <a id="5558" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="5567" href="TuringMachine3.html#5536" class="Bound">n</a> <a id="5569" href="TuringMachine3.html#5538" class="Bound">m</a> <a id="5571" class="Symbol">→</a> <a id="5573" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="5582" href="TuringMachine3.html#5536" class="Bound">n</a> <a id="5584" href="TuringMachine3.html#5538" class="Bound">m</a>
<a id="5586" href="TuringMachine3.html#5519" class="Function">TM-step-state</a> <a id="5600" class="Symbol">{</a><a id="5601" href="TuringMachine3.html#5601" class="Bound">n</a><a id="5602" class="Symbol">}</a> <a id="5604" class="Symbol">{</a><a id="5605" href="TuringMachine3.html#5605" class="Bound">m</a><a id="5606" class="Symbol">}</a> <a id="5608" href="TuringMachine3.html#5608" class="Bound">tm</a> <a id="5611" href="TuringMachine3.html#5611" class="Bound">s₁</a> <a id="5614" class="Symbol">=</a> <a id="5616" href="TuringMachine3.html#4814" class="Function">TM-apply-step</a> <a id="5630" href="TuringMachine3.html#5611" class="Bound">s₁</a> <a id="5633" href="TuringMachine3.html#5668" class="Function">δ</a>
  <a id="5637" class="Keyword">where</a>
    <a id="5647" class="Keyword">open</a> <a id="5652" href="TuringMachine3.html#2251" class="Module">TM-state</a> <a id="5661" href="TuringMachine3.html#5611" class="Bound">s₁</a>
    <a id="5668" href="TuringMachine3.html#5668" class="Function">δ</a> <a id="5670" class="Symbol">=</a> <a id="5672" href="TuringMachine3.html#4270" class="Function">TM-step</a> <a id="5680" href="TuringMachine3.html#5608" class="Bound">tm</a> <a id="5683" class="Symbol">(</a><a id="5684" href="TuringMachine3.html#2296" class="Field">state</a> <a id="5690" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5692" class="Symbol">(</a><a id="5693" href="TuringMachine3.html#2314" class="Field">tape</a> <a id="5698" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5700" href="TuringMachine3.html#2338" class="Field">pos</a><a id="5703" class="Symbol">))</a>




<a id="5710" class="Comment">{-
  This creates a starting TM-state from a Turing machine and an input tape
  1 + n = # of states
  m = # of symbols

  Inputs:
   * Turing machine      : TM (1 + n) m
   * starting tape       : List (Fin m)

  Outputs:
   * starting state      : TM (1 + n) m

  NOTE:
   * the Turing machine is only really needed to get the # of (internal) states;
     this could be supplied explicitly, and maybe it should be
-}</a>
<a id="TM-start-state"></a><a id="6128" href="TuringMachine3.html#6128" class="Function">TM-start-state</a> <a id="6143" class="Symbol">:</a> <a id="6145" class="Symbol">{</a><a id="6146" href="TuringMachine3.html#6146" class="Bound">n</a> <a id="6148" href="TuringMachine3.html#6148" class="Bound">m</a> <a id="6150" class="Symbol">:</a> <a id="6152" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="6155" class="Symbol">}</a> <a id="6157" class="Symbol">→</a> <a id="6159" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="6162" class="Symbol">(</a><a id="6163" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="6167" href="TuringMachine3.html#6146" class="Bound">n</a><a id="6168" class="Symbol">)</a> <a id="6170" href="TuringMachine3.html#6148" class="Bound">m</a> <a id="6172" class="Symbol">→</a> <a id="6174" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="6179" class="Symbol">(</a><a id="6180" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="6184" href="TuringMachine3.html#6148" class="Bound">m</a><a id="6185" class="Symbol">)</a> <a id="6187" class="Symbol">→</a> <a id="6189" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="6198" class="Symbol">(</a><a id="6199" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="6203" href="TuringMachine3.html#6146" class="Bound">n</a><a id="6204" class="Symbol">)</a> <a id="6206" href="TuringMachine3.html#6148" class="Bound">m</a>
<a id="6208" href="TuringMachine3.html#6128" class="Function">TM-start-state</a> <a id="6223" href="TuringMachine3.html#6223" class="Bound">tm</a> <a id="6226" href="TuringMachine3.html#6226" class="Bound">tape</a> <a id="6231" class="Symbol">=</a>
  <a id="6235" class="Keyword">record</a> <a id="6242" class="Symbol">{</a>
    <a id="6248" href="TuringMachine3.html#2296" class="Field">state</a> <a id="6254" class="Symbol">=</a> <a id="6256" href="Data.Fin.Base.html#1148" class="InductiveConstructor">zero</a> <a id="6261" class="Symbol">;</a>
    <a id="6267" href="TuringMachine3.html#2314" class="Field">tape</a> <a id="6272" class="Symbol">=</a> <a id="6274" href="TuringMachine3.html#6226" class="Bound">tape</a> <a id="6279" class="Symbol">;</a>
    <a id="6285" href="TuringMachine3.html#2338" class="Field">pos</a> <a id="6289" class="Symbol">=</a> <a id="6291" class="Number">0</a> <a id="6293" class="Symbol">;</a>
    <a id="6299" href="TuringMachine3.html#2352" class="Field">halted</a> <a id="6306" class="Symbol">=</a> <a id="6308" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a>
  <a id="6316" class="Symbol">}</a>






<a id="6324" class="Comment">{-
  This runs a TM for a given # of steps on an input tape to get a resulting TM-state
  1 + n = # of states
  m = # of symbols

  Inputs:
   * # of steps to run       : Nat
   * Turing machine          : TM (1 + n) m
 
  Outputs:
   * resulting TM-state      : TM-state (1 + n) m
-}</a>
<a id="TM-run"></a><a id="6609" href="TuringMachine3.html#6609" class="Function">TM-run</a> <a id="6616" class="Symbol">:</a> <a id="6618" class="Symbol">{</a><a id="6619" href="TuringMachine3.html#6619" class="Bound">n</a> <a id="6621" href="TuringMachine3.html#6621" class="Bound">m</a> <a id="6623" class="Symbol">:</a> <a id="6625" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="6628" class="Symbol">}</a> <a id="6630" class="Symbol">→</a> <a id="6632" href="TuringMachine3.html#78" class="Datatype">Nat</a> <a id="6636" class="Symbol">→</a> <a id="6638" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="6641" class="Symbol">(</a><a id="6642" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="6646" href="TuringMachine3.html#6619" class="Bound">n</a><a id="6647" class="Symbol">)</a> <a id="6649" href="TuringMachine3.html#6621" class="Bound">m</a> <a id="6651" class="Symbol">→</a> <a id="6653" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="6658" class="Symbol">(</a><a id="6659" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="6663" href="TuringMachine3.html#6621" class="Bound">m</a><a id="6664" class="Symbol">)</a> <a id="6666" class="Symbol">→</a> <a id="6668" href="TuringMachine3.html#2251" class="Record">TM-state</a> <a id="6677" class="Symbol">(</a><a id="6678" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="6682" href="TuringMachine3.html#6619" class="Bound">n</a><a id="6683" class="Symbol">)</a> <a id="6685" href="TuringMachine3.html#6621" class="Bound">m</a>
<a id="6687" href="TuringMachine3.html#6609" class="Function">TM-run</a> <a id="6694" href="TuringMachine3.html#6694" class="Bound">steps</a> <a id="6700" href="TuringMachine3.html#6700" class="Bound">M</a> <a id="6702" href="TuringMachine3.html#6702" class="Bound">tape</a> <a id="6707" class="Symbol">=</a> <a id="6709" href="Data.Nat.GeneralisedArithmetic.html#518" class="Function">fold</a> <a id="6714" class="Symbol">(</a><a id="6715" href="TuringMachine3.html#6128" class="Function">TM-start-state</a> <a id="6730" href="TuringMachine3.html#6700" class="Bound">M</a> <a id="6732" href="TuringMachine3.html#6702" class="Bound">tape</a><a id="6736" class="Symbol">)</a> <a id="6738" class="Symbol">(</a><a id="6739" href="TuringMachine3.html#5519" class="Function">TM-step-state</a> <a id="6753" href="TuringMachine3.html#6700" class="Bound">M</a><a id="6754" class="Symbol">)</a> <a id="6756" href="TuringMachine3.html#6694" class="Bound">steps</a>





<a id="6767" class="Comment">{-
  This represents the input (state , symbol) pair,
  and resulting instructions (new-state , write-symbol , move left/right) triple for an individual transition.
  n = # of states
  m = # of symbols

   * current state          : Fin n
   * symbol read            : Fin m
   * next state             : Fin n
   * symbol to write        : Fin m
   * move left/right        : Bool

  NOTE:
   * this is so that the TM can be represented as a List of transitions rather than as a function
     to make them somewhat easier to analyze and manipulate
-}</a>
<a id="7319" class="Keyword">data</a> <a id="TM-δ"></a><a id="7324" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="7329" class="Symbol">(</a><a id="7330" href="TuringMachine3.html#7330" class="Bound">n</a> <a id="7332" href="TuringMachine3.html#7332" class="Bound">m</a> <a id="7334" class="Symbol">:</a> <a id="7336" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="7339" class="Symbol">)</a> <a id="7341" class="Symbol">:</a> <a id="7343" class="PrimitiveType">Set</a> <a id="7347" class="Keyword">where</a>
  <a id="TM-δ.δ"></a><a id="7355" href="TuringMachine3.html#7355" class="InductiveConstructor">δ</a> <a id="7357" class="Symbol">:</a> <a id="7359" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="7363" href="TuringMachine3.html#7330" class="Bound">n</a> <a id="7365" class="Symbol">→</a> <a id="7367" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="7371" href="TuringMachine3.html#7332" class="Bound">m</a> <a id="7373" class="Symbol">→</a> <a id="7375" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="7379" href="TuringMachine3.html#7330" class="Bound">n</a> <a id="7381" class="Symbol">→</a> <a id="7383" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="7387" href="TuringMachine3.html#7332" class="Bound">m</a> <a id="7389" class="Symbol">→</a> <a id="7391" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a> <a id="7396" class="Symbol">→</a> <a id="7398" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="7403" href="TuringMachine3.html#7330" class="Bound">n</a> <a id="7405" href="TuringMachine3.html#7332" class="Bound">m</a>





<a id="7412" class="Comment">{-
  This extracts the TM-δ transition from a TM for a given (state , symbol) input pair, or `nothing` if there is
  no transition for that input

  n = # of states
  m = # of symbols

  Inputs:
   * Turing machine transition function    : TM n m
   * state                                 : Fin n
   * symbol                                : Fin m

  Outputs:
   * the transition table row              : TM-δ n m
  OR
   * `nothing`, if no transition exists
-}</a>
<a id="TM-get-δ"></a><a id="7875" href="TuringMachine3.html#7875" class="Function">TM-get-δ</a> <a id="7884" class="Symbol">:</a> <a id="7886" class="Symbol">{</a><a id="7887" href="TuringMachine3.html#7887" class="Bound">n</a> <a id="7889" href="TuringMachine3.html#7889" class="Bound">m</a> <a id="7891" class="Symbol">:</a> <a id="7893" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="7896" class="Symbol">}</a> <a id="7898" class="Symbol">→</a> <a id="7900" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="7903" href="TuringMachine3.html#7887" class="Bound">n</a> <a id="7905" href="TuringMachine3.html#7889" class="Bound">m</a> <a id="7907" class="Symbol">→</a> <a id="7909" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="7913" href="TuringMachine3.html#7887" class="Bound">n</a> <a id="7915" class="Symbol">→</a> <a id="7917" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="7921" href="TuringMachine3.html#7889" class="Bound">m</a> <a id="7923" class="Symbol">→</a> <a id="7925" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="7931" class="Symbol">(</a><a id="7932" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="7937" href="TuringMachine3.html#7887" class="Bound">n</a> <a id="7939" href="TuringMachine3.html#7889" class="Bound">m</a><a id="7940" class="Symbol">)</a>
<a id="7942" href="TuringMachine3.html#7875" class="Function">TM-get-δ</a> <a id="7951" class="Symbol">{</a><a id="7952" href="TuringMachine3.html#7952" class="Bound">n</a><a id="7953" class="Symbol">}</a> <a id="7955" class="Symbol">{</a><a id="7956" href="TuringMachine3.html#7956" class="Bound">m</a><a id="7957" class="Symbol">}</a> <a id="7959" href="TuringMachine3.html#7959" class="Bound">M</a> <a id="7961" href="TuringMachine3.html#7961" class="Bound">x</a> <a id="7963" href="TuringMachine3.html#7963" class="Bound">y</a> <a id="7965" class="Symbol">=</a> <a id="7967" href="Data.Maybe.Base.html#2039" class="Function">Maybe-map</a> <a id="7977" href="TuringMachine3.html#8009" class="Function">extract</a> <a id="7985" class="Symbol">(</a><a id="7986" href="TuringMachine3.html#7959" class="Bound">M</a> <a id="7988" class="Symbol">(</a><a id="7989" href="TuringMachine3.html#7961" class="Bound">x</a> <a id="7991" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="7993" href="TuringMachine3.html#7963" class="Bound">y</a><a id="7994" class="Symbol">))</a>
  <a id="7999" class="Keyword">where</a>
    <a id="8009" href="TuringMachine3.html#8009" class="Function">extract</a> <a id="8017" class="Symbol">:</a> <a id="8019" class="Symbol">(</a><a id="8020" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="8024" href="TuringMachine3.html#7952" class="Bound">n</a><a id="8025" class="Symbol">)</a> <a id="8027" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="8029" class="Symbol">((</a><a id="8031" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="8035" href="TuringMachine3.html#7956" class="Bound">m</a><a id="8036" class="Symbol">)</a> <a id="8038" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="8040" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a><a id="8044" class="Symbol">)</a> <a id="8046" class="Symbol">→</a> <a id="8048" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="8053" href="TuringMachine3.html#7952" class="Bound">n</a> <a id="8055" href="TuringMachine3.html#7956" class="Bound">m</a>
    <a id="8061" href="TuringMachine3.html#8009" class="Function">extract</a> <a id="8069" class="Symbol">(</a><a id="8070" href="TuringMachine3.html#8070" class="Bound">x&#39;</a> <a id="8073" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8075" class="Symbol">(</a><a id="8076" href="TuringMachine3.html#8076" class="Bound">y&#39;</a> <a id="8079" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8081" href="TuringMachine3.html#8081" class="Bound">d</a><a id="8082" class="Symbol">))</a> <a id="8085" class="Symbol">=</a> <a id="8087" href="TuringMachine3.html#7355" class="InductiveConstructor">δ</a> <a id="8089" href="TuringMachine3.html#7961" class="Bound">x</a> <a id="8091" href="TuringMachine3.html#7963" class="Bound">y</a> <a id="8093" href="TuringMachine3.html#8070" class="Bound">x&#39;</a> <a id="8096" href="TuringMachine3.html#8076" class="Bound">y&#39;</a> <a id="8099" href="TuringMachine3.html#8081" class="Bound">d</a>




<a id="8105" class="Comment">{-
  This extracts a full TM transition from a TM transition function
  1 + n = # of states
  1 + m = # of symbols

  Input:
   * transition function        : TM (1 + n) (1 + m)

  Output:
   * transition table           : List (TM-δ (1 + n) (1 + m))
-}</a>
<a id="TM-to-table"></a><a id="8359" href="TuringMachine3.html#8359" class="Function">TM-to-table</a> <a id="8371" class="Symbol">:</a> <a id="8373" class="Symbol">{</a><a id="8374" href="TuringMachine3.html#8374" class="Bound">n</a> <a id="8376" href="TuringMachine3.html#8376" class="Bound">m</a> <a id="8378" class="Symbol">:</a> <a id="8380" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="8383" class="Symbol">}</a> <a id="8385" class="Symbol">→</a> <a id="8387" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="8390" class="Symbol">(</a><a id="8391" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8395" href="TuringMachine3.html#8374" class="Bound">n</a><a id="8396" class="Symbol">)</a> <a id="8398" class="Symbol">(</a><a id="8399" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8403" href="TuringMachine3.html#8376" class="Bound">m</a><a id="8404" class="Symbol">)</a> <a id="8406" class="Symbol">→</a> <a id="8408" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="8413" class="Symbol">(</a><a id="8414" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="8419" class="Symbol">(</a><a id="8420" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8424" href="TuringMachine3.html#8374" class="Bound">n</a><a id="8425" class="Symbol">)</a> <a id="8427" class="Symbol">(</a><a id="8428" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="8432" href="TuringMachine3.html#8376" class="Bound">m</a><a id="8433" class="Symbol">))</a>
<a id="8436" href="TuringMachine3.html#8359" class="Function">TM-to-table</a> <a id="8448" class="Symbol">{</a><a id="8449" href="TuringMachine3.html#8449" class="Bound">n</a><a id="8450" class="Symbol">}</a> <a id="8452" class="Symbol">{</a><a id="8453" href="TuringMachine3.html#8453" class="Bound">m</a><a id="8454" class="Symbol">}</a> <a id="8456" href="TuringMachine3.html#8456" class="Bound">M</a> <a id="8458" class="Symbol">=</a> 
  <a id="8463" href="Util.List.html#2359" class="Function">flatten</a> <a id="8471" class="Symbol">(</a>
    <a id="8477" href="Util.Fin.html#574" class="Function">Fin-map-list</a> <a id="8490" class="Symbol">(λ</a> <a id="8493" href="TuringMachine3.html#8493" class="Bound">x</a> <a id="8495" class="Symbol">→</a> 
      <a id="8504" href="Util.Fin.html#690" class="Function">Fin-filter</a> <a id="8515" class="Symbol">(λ</a> <a id="8518" href="TuringMachine3.html#8518" class="Bound">y</a> <a id="8520" class="Symbol">→</a>
        <a id="8530" href="TuringMachine3.html#7875" class="Function">TM-get-δ</a> <a id="8539" href="TuringMachine3.html#8456" class="Bound">M</a> <a id="8541" href="TuringMachine3.html#8493" class="Bound">x</a> <a id="8543" href="TuringMachine3.html#8518" class="Bound">y</a>
      <a id="8551" class="Symbol">)</a> <a id="8553" class="Symbol">(</a><a id="8554" href="Data.Fin.Base.html#1867" class="Function">fromℕ</a> <a id="8560" href="TuringMachine3.html#8453" class="Bound">m</a><a id="8561" class="Symbol">)</a>
    <a id="8567" class="Symbol">)</a> <a id="8569" class="Symbol">(</a><a id="8570" href="Data.Fin.Base.html#1867" class="Function">fromℕ</a> <a id="8576" href="TuringMachine3.html#8449" class="Bound">n</a><a id="8577" class="Symbol">)</a>
  <a id="8581" class="Symbol">)</a>




<a id="8587" class="Comment">{-
  This extracts the TM-transition instruction from a transition table row

  Input:
   * transition table row       : TM-δ n m
  
  Output:
   * transition instructions    : TM-transition n m
-}</a>
<a id="TM-run-table-δ"></a><a id="8785" href="TuringMachine3.html#8785" class="Function">TM-run-table-δ</a> <a id="8800" class="Symbol">:</a> <a id="8802" class="Symbol">{</a><a id="8803" href="TuringMachine3.html#8803" class="Bound">n</a> <a id="8805" href="TuringMachine3.html#8805" class="Bound">m</a> <a id="8807" class="Symbol">:</a> <a id="8809" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="8812" class="Symbol">}</a> <a id="8814" class="Symbol">→</a> <a id="8816" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="8821" href="TuringMachine3.html#8803" class="Bound">n</a> <a id="8823" href="TuringMachine3.html#8805" class="Bound">m</a> <a id="8825" class="Symbol">→</a> <a id="8827" href="TuringMachine3.html#423" class="Function">TM-transition</a> <a id="8841" href="TuringMachine3.html#8803" class="Bound">n</a> <a id="8843" href="TuringMachine3.html#8805" class="Bound">m</a>
<a id="8845" href="TuringMachine3.html#8785" class="Function">TM-run-table-δ</a> <a id="8860" class="Symbol">(</a><a id="8861" href="TuringMachine3.html#7355" class="InductiveConstructor">δ</a> <a id="8863" href="TuringMachine3.html#8863" class="Bound">x</a> <a id="8865" href="TuringMachine3.html#8865" class="Bound">y</a> <a id="8867" href="TuringMachine3.html#8867" class="Bound">x&#39;</a> <a id="8870" href="TuringMachine3.html#8870" class="Bound">y&#39;</a> <a id="8873" href="TuringMachine3.html#8873" class="Bound">d</a><a id="8874" class="Symbol">)</a> <a id="8876" class="Symbol">=</a> <a id="8878" href="TuringMachine3.html#8867" class="Bound">x&#39;</a> <a id="8881" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8883" class="Symbol">(</a><a id="8884" href="TuringMachine3.html#8870" class="Bound">y&#39;</a> <a id="8887" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="8889" href="TuringMachine3.html#8873" class="Bound">d</a><a id="8890" class="Symbol">)</a>






<a id="8898" class="Comment">{-
  This translates a TM transition function from a transition table
  1 + n = # of states
  1 + m = # of symbols

  Input :
   * transition table            : List (TM-δ (1 + n) (1 + m))

  Output: 
   * transition function         : TM (1 + n) (1 + m)
-}</a>
<a id="TM-from-table"></a><a id="9156" href="TuringMachine3.html#9156" class="Function">TM-from-table</a> <a id="9170" class="Symbol">:</a> <a id="9172" class="Symbol">{</a><a id="9173" href="TuringMachine3.html#9173" class="Bound">n</a> <a id="9175" href="TuringMachine3.html#9175" class="Bound">m</a> <a id="9177" class="Symbol">:</a> <a id="9179" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="9182" class="Symbol">}</a> <a id="9184" class="Symbol">→</a> <a id="9186" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="9191" class="Symbol">(</a><a id="9192" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="9197" class="Symbol">(</a><a id="9198" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9202" href="TuringMachine3.html#9173" class="Bound">n</a><a id="9203" class="Symbol">)</a> <a id="9205" class="Symbol">(</a><a id="9206" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9210" href="TuringMachine3.html#9175" class="Bound">m</a><a id="9211" class="Symbol">))</a> <a id="9214" class="Symbol">→</a> <a id="9216" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="9219" class="Symbol">(</a><a id="9220" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9224" href="TuringMachine3.html#9173" class="Bound">n</a><a id="9225" class="Symbol">)</a> <a id="9227" class="Symbol">(</a><a id="9228" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9232" href="TuringMachine3.html#9175" class="Bound">m</a><a id="9233" class="Symbol">)</a>
<a id="9235" href="TuringMachine3.html#9156" class="Function">TM-from-table</a> <a id="9249" class="Symbol">{</a><a id="9250" href="TuringMachine3.html#9250" class="Bound">n</a><a id="9251" class="Symbol">}</a> <a id="9253" class="Symbol">{</a><a id="9254" href="TuringMachine3.html#9254" class="Bound">m</a><a id="9255" class="Symbol">}</a> <a id="9257" href="TuringMachine3.html#9257" class="Bound">table</a> <a id="9263" class="Symbol">(</a><a id="9264" href="TuringMachine3.html#9264" class="Bound">x</a> <a id="9266" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9268" href="TuringMachine3.html#9268" class="Bound">y</a><a id="9269" class="Symbol">)</a> <a id="9271" class="Symbol">=</a> <a id="9273" href="Data.Maybe.Base.html#2039" class="Function">Maybe-map</a> <a id="9283" href="TuringMachine3.html#8785" class="Function">TM-run-table-δ</a> <a id="9298" class="Symbol">(</a><a id="9299" href="Util.List.html#834" class="Function">find</a> <a id="9304" href="TuringMachine3.html#9335" class="Function">match-input</a> <a id="9316" href="TuringMachine3.html#9257" class="Bound">table</a><a id="9321" class="Symbol">)</a>
  <a id="9325" class="Keyword">where</a>
    <a id="9335" href="TuringMachine3.html#9335" class="Function">match-input</a> <a id="9347" class="Symbol">:</a> <a id="9349" href="TuringMachine3.html#7324" class="Datatype">TM-δ</a> <a id="9354" class="Symbol">(</a><a id="9355" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9359" href="TuringMachine3.html#9250" class="Bound">n</a><a id="9360" class="Symbol">)</a> <a id="9362" class="Symbol">(</a><a id="9363" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9367" href="TuringMachine3.html#9254" class="Bound">m</a><a id="9368" class="Symbol">)</a> <a id="9370" class="Symbol">→</a> <a id="9372" href="Agda.Builtin.Bool.html#163" class="Datatype">Bool</a>
    <a id="9381" href="TuringMachine3.html#9335" class="Function">match-input</a> <a id="9393" class="Symbol">(</a><a id="9394" href="TuringMachine3.html#7355" class="InductiveConstructor">δ</a> <a id="9396" href="TuringMachine3.html#9396" class="Bound">x&#39;</a> <a id="9399" href="TuringMachine3.html#9399" class="Bound">y&#39;</a> <a id="9402" class="Symbol">_</a> <a id="9404" class="Symbol">_</a> <a id="9406" class="Symbol">_)</a> <a id="9409" class="Symbol">=</a> <a id="9411" href="Util.BoolProp.html#1371" class="Function">eq-∧</a> <a id="9416" class="Symbol">(</a><a id="9417" href="Util.Fin.html#810" class="Function">eq-Fin</a> <a id="9424" class="Symbol">{</a><a id="9425" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9429" href="TuringMachine3.html#9250" class="Bound">n</a><a id="9430" class="Symbol">})</a> <a id="9433" class="Symbol">(</a><a id="9434" href="Util.Fin.html#810" class="Function">eq-Fin</a> <a id="9441" class="Symbol">{</a><a id="9442" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="9446" href="TuringMachine3.html#9254" class="Bound">m</a><a id="9447" class="Symbol">})</a> <a id="9450" class="Symbol">(</a><a id="9451" href="TuringMachine3.html#9264" class="Bound">x</a> <a id="9453" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9455" href="TuringMachine3.html#9268" class="Bound">y</a><a id="9456" class="Symbol">)</a> <a id="9458" class="Symbol">(</a><a id="9459" href="TuringMachine3.html#9396" class="Bound">x&#39;</a> <a id="9462" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9464" href="TuringMachine3.html#9399" class="Bound">y&#39;</a><a id="9466" class="Symbol">)</a>




<a id="TM-raise-action"></a><a id="9472" href="TuringMachine3.html#9472" class="Function">TM-raise-action</a> <a id="9488" class="Symbol">:</a> <a id="9490" class="Symbol">{</a><a id="9491" href="TuringMachine3.html#9491" class="Bound">n</a> <a id="9493" href="TuringMachine3.html#9493" class="Bound">m</a> <a id="9495" class="Symbol">:</a> <a id="9497" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="9500" class="Symbol">}</a> <a id="9502" class="Symbol">→</a> <a id="9504" class="Symbol">(</a><a id="9505" href="TuringMachine3.html#9505" class="Bound">n&#39;</a> <a id="9508" class="Symbol">:</a> <a id="9510" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="9513" class="Symbol">)</a> <a id="9515" class="Symbol">→</a> <a id="9517" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="9527" href="TuringMachine3.html#9491" class="Bound">n</a> <a id="9529" href="TuringMachine3.html#9493" class="Bound">m</a> <a id="9531" class="Symbol">→</a> <a id="9533" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="9543" class="Symbol">(</a><a id="9544" href="TuringMachine3.html#9505" class="Bound">n&#39;</a> <a id="9547" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="9549" href="TuringMachine3.html#9491" class="Bound">n</a><a id="9550" class="Symbol">)</a> <a id="9552" href="TuringMachine3.html#9493" class="Bound">m</a>
<a id="9554" href="TuringMachine3.html#9472" class="Function">TM-raise-action</a> <a id="9570" href="TuringMachine3.html#9570" class="Bound">n&#39;</a> <a id="9573" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a> <a id="9581" class="Symbol">=</a> <a id="9583" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
<a id="9591" href="TuringMachine3.html#9472" class="Function">TM-raise-action</a> <a id="9607" href="TuringMachine3.html#9607" class="Bound">n&#39;</a> <a id="9610" class="Symbol">(</a><a id="9611" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="9616" class="Symbol">(</a><a id="9617" href="TuringMachine3.html#9617" class="Bound">q</a> <a id="9619" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9621" class="Symbol">(</a><a id="9622" href="TuringMachine3.html#9622" class="Bound">s</a> <a id="9624" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9626" href="TuringMachine3.html#9626" class="Bound">b</a><a id="9627" class="Symbol">)))</a> <a id="9631" class="Symbol">=</a> <a id="9633" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="9638" class="Symbol">(</a><a id="9639" href="TuringMachine3.html#211" class="Function">raise</a> <a id="9645" href="TuringMachine3.html#9607" class="Bound">n&#39;</a> <a id="9648" href="TuringMachine3.html#9617" class="Bound">q</a> <a id="9650" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9652" class="Symbol">(</a><a id="9653" href="TuringMachine3.html#9622" class="Bound">s</a> <a id="9655" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="9657" href="TuringMachine3.html#9626" class="Bound">b</a><a id="9658" class="Symbol">))</a>



<a id="9664" class="Comment">{-
  This translates an n-state, m-symbol TM to an equivalent (n&#39; + n)-state , m-symbol TM.
  It essentially runs on the first n states.

  Input:
   * # of states to add           : Nat
   * original TM                  : TM n m

  Outputs:
   * TM with new states added     : TM (n&#39; + n) m

  TODO:
   * prove equivalence
-}</a>
<a id="TM-raise"></a><a id="9991" href="TuringMachine3.html#9991" class="Function">TM-raise</a> <a id="10000" class="Symbol">:</a> <a id="10002" class="Symbol">{</a><a id="10003" href="TuringMachine3.html#10003" class="Bound">n</a> <a id="10005" href="TuringMachine3.html#10005" class="Bound">m</a> <a id="10007" class="Symbol">:</a> <a id="10009" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="10012" class="Symbol">}</a> <a id="10014" class="Symbol">→</a> <a id="10016" class="Symbol">(</a><a id="10017" href="TuringMachine3.html#10017" class="Bound">n&#39;</a> <a id="10020" class="Symbol">:</a> <a id="10022" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="10025" class="Symbol">)</a> <a id="10027" class="Symbol">→</a> <a id="10029" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="10032" href="TuringMachine3.html#10003" class="Bound">n</a> <a id="10034" href="TuringMachine3.html#10005" class="Bound">m</a> <a id="10036" class="Symbol">→</a> <a id="10038" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="10041" class="Symbol">(</a><a id="10042" href="TuringMachine3.html#10017" class="Bound">n&#39;</a> <a id="10045" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="10047" href="TuringMachine3.html#10003" class="Bound">n</a><a id="10048" class="Symbol">)</a> <a id="10050" href="TuringMachine3.html#10005" class="Bound">m</a>
<a id="10052" href="TuringMachine3.html#9991" class="Function">TM-raise</a> <a id="10061" class="Symbol">{</a><a id="10062" href="TuringMachine3.html#10062" class="Bound">n</a><a id="10063" class="Symbol">}</a> <a id="10065" class="Symbol">{</a><a id="10066" href="TuringMachine3.html#10066" class="Bound">m</a><a id="10067" class="Symbol">}</a> <a id="10069" href="TuringMachine3.html#10069" class="Bound">n&#39;</a> <a id="10072" href="TuringMachine3.html#10072" class="Bound">M</a> <a id="10074" class="Symbol">(</a><a id="10075" href="TuringMachine3.html#10075" class="Bound">q</a> <a id="10077" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10079" href="TuringMachine3.html#10079" class="Bound">s</a><a id="10080" class="Symbol">)</a> <a id="10082" class="Symbol">=</a> 
  <a id="10087" href="Util.DependentIf.html#227" class="Function">dite&#39;</a>
    <a id="10097" class="Symbol">((</a><a id="10099" href="Data.Fin.Base.html#1252" class="Function">toℕ</a> <a id="10103" href="TuringMachine3.html#10075" class="Bound">q</a><a id="10104" class="Symbol">)</a> <a id="10106" href="Basic.html#855" class="Primitive Operator">lt</a> <a id="10109" href="TuringMachine3.html#10062" class="Bound">n</a><a id="10110" class="Symbol">)</a>
    <a id="10116" class="Symbol">(λ</a> <a id="10119" href="TuringMachine3.html#10119" class="Bound">case-true</a> <a id="10129" class="Symbol">→</a>
      <a id="10137" href="TuringMachine3.html#9472" class="Function">TM-raise-action</a> <a id="10153" href="TuringMachine3.html#10069" class="Bound">n&#39;</a> <a id="10156" class="Symbol">(</a><a id="10157" href="TuringMachine3.html#10072" class="Bound">M</a> <a id="10159" class="Symbol">(</a><a id="10160" href="Data.Fin.Base.html#1973" class="Function">fromℕ&lt;</a> <a id="10167" class="Symbol">(</a><a id="10168" href="Util.Arithmetic.html#3198" class="Function">lt→&lt;</a> <a id="10173" href="TuringMachine3.html#10119" class="Bound">case-true</a><a id="10182" class="Symbol">)</a> <a id="10184" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="10186" href="TuringMachine3.html#10079" class="Bound">s</a><a id="10187" class="Symbol">))</a>
    <a id="10194" class="Symbol">)</a>
    <a id="10200" class="Symbol">(λ</a> <a id="10203" href="TuringMachine3.html#10203" class="Bound">_</a> <a id="10205" class="Symbol">→</a> <a id="10207" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a><a id="10214" class="Symbol">)</a>




<a id="10220" class="Comment">{-
  This translates an n-state, m-symbol TM to an equivalent (n&#39; + n)-state , m-symbol TM.
  It runs on the last n&#39; states.

  Input:
   * # of states to add           : Nat
   * original TM                  : TM n m

  Outputs:
   * TM with new states added     : TM (n&#39; + n) m


  EXPLANATION:
  adding 0 states to a TM:
   * the new TM is identical to the first, just run the first directly on any input

  adding 1+n&#39; states to a 0-state TM:
   * none of the states in the new TM correspond to states in the original TM; the semantics
     of any state will be to halt immediately on any input

  adding 1+n&#39; states to a 1+n-state TM:
   * if the state s is less than n&#39;, this doesn&#39;t correspond to any state of the original TM,
     the semantics will be to halt immediately.
   * if the state s is greater or equal to n&#39;, this corresponds to the state (s - n&#39;) of the original TM
     run the original TM on the state (s - n&#39;)

  TODO:
   * clean up annoying Fin arithmetic
   * unify the 2 cases for adding 1+n&#39; states
   * prove equivalence
-}</a>
<a id="TM-raise+"></a><a id="11273" href="TuringMachine3.html#11273" class="Function">TM-raise+</a> <a id="11283" class="Symbol">:</a> <a id="11285" class="Symbol">{</a><a id="11286" href="TuringMachine3.html#11286" class="Bound">n</a> <a id="11288" href="TuringMachine3.html#11288" class="Bound">m</a> <a id="11290" class="Symbol">:</a> <a id="11292" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="11295" class="Symbol">}</a> <a id="11297" class="Symbol">→</a> <a id="11299" class="Symbol">(</a><a id="11300" href="TuringMachine3.html#11300" class="Bound">n&#39;</a> <a id="11303" class="Symbol">:</a> <a id="11305" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="11308" class="Symbol">)</a> <a id="11310" class="Symbol">→</a> <a id="11312" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="11315" href="TuringMachine3.html#11286" class="Bound">n</a> <a id="11317" href="TuringMachine3.html#11288" class="Bound">m</a> <a id="11319" class="Symbol">→</a> <a id="11321" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="11324" class="Symbol">(</a><a id="11325" href="TuringMachine3.html#11300" class="Bound">n&#39;</a> <a id="11328" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11330" href="TuringMachine3.html#11286" class="Bound">n</a><a id="11331" class="Symbol">)</a> <a id="11333" href="TuringMachine3.html#11288" class="Bound">m</a>
<a id="11335" href="TuringMachine3.html#11273" class="Function">TM-raise+</a> <a id="11345" class="Symbol">{</a><a id="11346" href="TuringMachine3.html#11346" class="Bound">n</a><a id="11347" class="Symbol">}</a>     <a id="11353" class="Symbol">{</a><a id="11354" href="TuringMachine3.html#11354" class="Bound">m</a><a id="11355" class="Symbol">}</a> <a id="11357" class="Number">0</a>        <a id="11366" href="TuringMachine3.html#11366" class="Bound">M</a> <a id="11368" class="Symbol">(</a><a id="11369" href="TuringMachine3.html#11369" class="Bound">q</a> <a id="11371" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11373" href="TuringMachine3.html#11373" class="Bound">s</a><a id="11374" class="Symbol">)</a> <a id="11376" class="Symbol">=</a> <a id="11378" href="TuringMachine3.html#11366" class="Bound">M</a> <a id="11380" class="Symbol">(</a><a id="11381" href="TuringMachine3.html#11369" class="Bound">q</a> <a id="11383" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11385" href="TuringMachine3.html#11373" class="Bound">s</a><a id="11386" class="Symbol">)</a>
<a id="11388" href="TuringMachine3.html#11273" class="Function">TM-raise+</a> <a id="11398" class="Symbol">{</a><a id="11399" class="Number">0</a><a id="11400" class="Symbol">}</a>     <a id="11406" class="Symbol">{</a><a id="11407" href="TuringMachine3.html#11407" class="Bound">m</a><a id="11408" class="Symbol">}</a> <a id="11410" class="Symbol">(</a><a id="11411" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="11415" href="TuringMachine3.html#11415" class="Bound">n&#39;</a><a id="11417" class="Symbol">)</a> <a id="11419" href="TuringMachine3.html#11419" class="Bound">M</a> <a id="11421" class="Symbol">(</a><a id="11422" href="TuringMachine3.html#11422" class="Bound">q</a> <a id="11424" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11426" href="TuringMachine3.html#11426" class="Bound">s</a><a id="11427" class="Symbol">)</a> <a id="11429" class="Symbol">=</a> <a id="11431" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
<a id="11439" href="TuringMachine3.html#11273" class="Function">TM-raise+</a> <a id="11449" class="Symbol">{</a><a id="11450" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="11454" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11455" class="Symbol">}</a> <a id="11457" class="Symbol">{</a><a id="11458" href="TuringMachine3.html#11458" class="Bound">m</a><a id="11459" class="Symbol">}</a> <a id="11461" class="Symbol">(</a><a id="11462" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="11466" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11468" class="Symbol">)</a> <a id="11470" href="TuringMachine3.html#11470" class="Bound">M</a> <a id="11472" class="Symbol">(</a><a id="11473" href="TuringMachine3.html#11473" class="Bound">q</a> <a id="11475" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11477" href="TuringMachine3.html#11477" class="Bound">s</a><a id="11478" class="Symbol">)</a> <a id="11480" class="Symbol">=</a> <a id="11482" href="TuringMachine3.html#11947" class="Function">output</a>
  <a id="11491" class="Keyword">where</a>
    <a id="11501" href="TuringMachine3.html#11501" class="Function">qₙ&#39;</a> <a id="11505" class="Symbol">:</a> <a id="11507" class="Symbol">(</a><a id="11508" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="11512" class="Symbol">(((</a><a id="11515" class="Number">1</a> <a id="11517" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11519" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11521" class="Symbol">)</a> <a id="11523" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11525" class="Symbol">(</a><a id="11526" class="Number">1</a> <a id="11528" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11530" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11531" class="Symbol">))</a> <a id="11534" href="Basic.html#869" class="Primitive Operator">-</a> <a id="11536" class="Symbol">(</a><a id="11537" class="Number">1</a> <a id="11539" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11541" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11543" class="Symbol">)))</a>
    <a id="11551" href="TuringMachine3.html#11501" class="Function">qₙ&#39;</a> <a id="11555" class="Symbol">=</a> <a id="11557" href="Util.Fin.html#1504" class="Function">Fin-sub</a> <a id="11565" href="TuringMachine3.html#11473" class="Bound">q</a> <a id="11567" class="Symbol">(</a><a id="11568" class="Number">1</a> <a id="11570" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11572" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11574" class="Symbol">)</a> <a id="11576" class="Symbol">(</a><a id="11577" href="Util.Arithmetic.html#2778" class="Function">m&lt;m+1+n</a> <a id="11585" class="Symbol">(</a><a id="11586" class="Number">1</a> <a id="11588" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11590" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11592" class="Symbol">)</a> <a id="11594" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11595" class="Symbol">)</a>

    <a id="11602" href="TuringMachine3.html#11602" class="Function">qₙ</a> <a id="11605" class="Symbol">:</a> <a id="11607" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="11611" class="Symbol">(</a><a id="11612" class="Number">1</a> <a id="11614" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11616" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11617" class="Symbol">)</a>
    <a id="11623" href="TuringMachine3.html#11602" class="Function">qₙ</a> <a id="11626" class="Symbol">=</a> <a id="11628" href="Basic.html#2415" class="Function">coerce</a> <a id="11635" class="Symbol">(</a><a id="11636" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="11641" class="Symbol">(λ</a> <a id="11644" href="TuringMachine3.html#11644" class="Bound">x</a> <a id="11646" class="Symbol">→</a> <a id="11648" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="11652" href="TuringMachine3.html#11644" class="Bound">x</a><a id="11653" class="Symbol">)</a> <a id="11655" class="Symbol">(</a><a id="11656" href="Util.Arithmetic.html#2849" class="Function">x+y-x=y</a> <a id="11664" class="Symbol">(</a><a id="11665" class="Number">1</a> <a id="11667" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11669" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11671" class="Symbol">)</a> <a id="11673" class="Symbol">(</a><a id="11674" class="Number">1</a> <a id="11676" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11678" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11679" class="Symbol">)))</a> <a id="11683" href="TuringMachine3.html#11501" class="Function">qₙ&#39;</a>
    
    <a id="11696" href="TuringMachine3.html#11696" class="Function">M-out</a> <a id="11702" class="Symbol">:</a> <a id="11704" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="11714" class="Symbol">(</a><a id="11715" class="Number">1</a> <a id="11717" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11719" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11720" class="Symbol">)</a> <a id="11722" href="TuringMachine3.html#11458" class="Bound">m</a>
    <a id="11728" href="TuringMachine3.html#11696" class="Function">M-out</a> <a id="11734" class="Symbol">=</a> <a id="11736" href="TuringMachine3.html#11470" class="Bound">M</a> <a id="11738" class="Symbol">(</a><a id="11739" href="TuringMachine3.html#11602" class="Function">qₙ</a> <a id="11742" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11744" href="TuringMachine3.html#11477" class="Bound">s</a><a id="11745" class="Symbol">)</a>
    
    <a id="11756" href="TuringMachine3.html#11756" class="Function">get-results</a> <a id="11768" class="Symbol">:</a> <a id="11770" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="11780" class="Symbol">(</a><a id="11781" class="Number">1</a> <a id="11783" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11785" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11786" class="Symbol">)</a> <a id="11788" href="TuringMachine3.html#11458" class="Bound">m</a> <a id="11790" class="Symbol">→</a> <a id="11792" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="11802" class="Symbol">((</a><a id="11804" class="Number">1</a> <a id="11806" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11808" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11810" class="Symbol">)</a> <a id="11812" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11814" class="Symbol">(</a><a id="11815" class="Number">1</a> <a id="11817" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="11819" href="TuringMachine3.html#11454" class="Bound">n</a><a id="11820" class="Symbol">))</a> <a id="11823" href="TuringMachine3.html#11458" class="Bound">m</a>
    <a id="11829" href="TuringMachine3.html#11756" class="Function">get-results</a> <a id="11841" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a> <a id="11849" class="Symbol">=</a> <a id="11851" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
    <a id="11863" href="TuringMachine3.html#11756" class="Function">get-results</a> <a id="11875" class="Symbol">(</a><a id="11876" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="11881" class="Symbol">(</a><a id="11882" href="TuringMachine3.html#11882" class="Bound">q&#39;</a> <a id="11885" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11887" class="Symbol">(</a><a id="11888" href="TuringMachine3.html#11888" class="Bound">s&#39;</a> <a id="11891" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11893" href="TuringMachine3.html#11893" class="Bound">d</a><a id="11894" class="Symbol">)))</a> <a id="11898" class="Symbol">=</a> <a id="11900" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="11905" class="Symbol">((</a><a id="11907" href="TuringMachine3.html#211" class="Function">raise</a> <a id="11913" class="Symbol">(</a><a id="11914" href="Agda.Builtin.Nat.html#223" class="InductiveConstructor">suc</a> <a id="11918" href="TuringMachine3.html#11466" class="Bound">n&#39;</a><a id="11920" class="Symbol">)</a> <a id="11922" href="TuringMachine3.html#11882" class="Bound">q&#39;</a><a id="11924" class="Symbol">)</a> <a id="11926" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11928" class="Symbol">(</a><a id="11929" href="TuringMachine3.html#11888" class="Bound">s&#39;</a> <a id="11932" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="11934" href="TuringMachine3.html#11893" class="Bound">d</a><a id="11935" class="Symbol">))</a>
    
    <a id="11947" href="TuringMachine3.html#11947" class="Function">output</a> <a id="11954" class="Symbol">=</a> <a id="11956" href="TuringMachine3.html#11756" class="Function">get-results</a> <a id="11968" href="TuringMachine3.html#11696" class="Function">M-out</a>



<a id="11977" class="Comment">{-
  This takes two TMs and produces a TM that&#39;s equivalent to running them in sequence
  
  Inputs:
   * n-state , m-symbol TM              : TM n m
   * 1+n&#39;-state , m-symbol TM           : TM (1 + n&#39;) m

  Output:
   * (1+n&#39;)+n-state , m-symbol TM       : TM ((1 + n&#39;) + n) m

  NOTE:
   * This isn&#39;t equivalent to the partial-function composition M₂ ∘ M₁ , because
     it doesn&#39;t shift back to the beginning of the tape after M₁ finishes, it just
     shifts one cell right and starts running M₂.
   * This can perhaps be used as a primitive in constructing partial-function composition.

  TODO:
   * prove these specifications on the behavior
-}</a>
<a id="seq"></a><a id="12630" href="TuringMachine3.html#12630" class="Function">seq</a> <a id="12634" class="Symbol">:</a> <a id="12636" class="Symbol">{</a><a id="12637" href="TuringMachine3.html#12637" class="Bound">n</a> <a id="12639" href="TuringMachine3.html#12639" class="Bound">n&#39;</a> <a id="12642" href="TuringMachine3.html#12642" class="Bound">m</a> <a id="12644" class="Symbol">:</a> <a id="12646" href="TuringMachine3.html#78" class="Datatype">Nat</a><a id="12649" class="Symbol">}</a> <a id="12651" class="Symbol">→</a> <a id="12653" class="Symbol">(</a><a id="12654" href="TuringMachine3.html#12654" class="Bound">M₁</a> <a id="12657" class="Symbol">:</a> <a id="12659" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="12662" href="TuringMachine3.html#12637" class="Bound">n</a> <a id="12664" href="TuringMachine3.html#12642" class="Bound">m</a><a id="12665" class="Symbol">)</a> <a id="12667" class="Symbol">→</a> <a id="12669" class="Symbol">(</a><a id="12670" href="TuringMachine3.html#12670" class="Bound">M₂</a> <a id="12673" class="Symbol">:</a> <a id="12675" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="12678" class="Symbol">(</a><a id="12679" class="Number">1</a> <a id="12681" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12683" href="TuringMachine3.html#12639" class="Bound">n&#39;</a><a id="12685" class="Symbol">)</a> <a id="12687" href="TuringMachine3.html#12642" class="Bound">m</a><a id="12688" class="Symbol">)</a> <a id="12690" class="Symbol">→</a> <a id="12692" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="12695" class="Symbol">((</a><a id="12697" class="Number">1</a> <a id="12699" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12701" href="TuringMachine3.html#12639" class="Bound">n&#39;</a><a id="12703" class="Symbol">)</a> <a id="12705" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12707" href="TuringMachine3.html#12637" class="Bound">n</a><a id="12708" class="Symbol">)</a> <a id="12710" href="TuringMachine3.html#12642" class="Bound">m</a>
<a id="12712" href="TuringMachine3.html#12630" class="Function">seq</a> <a id="12716" class="Symbol">{</a><a id="12717" href="TuringMachine3.html#12717" class="Bound">n</a><a id="12718" class="Symbol">}</a> <a id="12720" class="Symbol">{</a><a id="12721" href="TuringMachine3.html#12721" class="Bound">n&#39;</a><a id="12723" class="Symbol">}</a> <a id="12725" class="Symbol">{</a><a id="12726" href="TuringMachine3.html#12726" class="Bound">m</a><a id="12727" class="Symbol">}</a> <a id="12729" href="TuringMachine3.html#12729" class="Bound">M₁</a> <a id="12732" href="TuringMachine3.html#12732" class="Bound">M₂</a> <a id="12735" class="Symbol">=</a> <a id="12737" href="TuringMachine3.html#13623" class="Function">M₁,₂</a>
  <a id="12744" class="Keyword">where</a>
    <a id="12754" class="Comment">{-
      Raise M₁ and M₂ to machines with (1 + n&#39; + n) states.
    -}</a>
    <a id="12828" href="TuringMachine3.html#12828" class="Function">fix-M₁</a> <a id="12835" class="Symbol">:</a> <a id="12837" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="12840" class="Symbol">(</a><a id="12841" class="Number">1</a> <a id="12843" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12845" href="TuringMachine3.html#12721" class="Bound">n&#39;</a> <a id="12848" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12850" href="TuringMachine3.html#12717" class="Bound">n</a><a id="12851" class="Symbol">)</a> <a id="12853" href="TuringMachine3.html#12726" class="Bound">m</a>
    <a id="12859" href="TuringMachine3.html#12828" class="Function">fix-M₁</a> <a id="12866" class="Symbol">=</a> <a id="12868" href="TuringMachine3.html#9991" class="Function">TM-raise</a> <a id="12877" class="Symbol">(</a><a id="12878" class="Number">1</a> <a id="12880" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12882" href="TuringMachine3.html#12721" class="Bound">n&#39;</a><a id="12884" class="Symbol">)</a> <a id="12886" href="TuringMachine3.html#12729" class="Bound">M₁</a>

    <a id="12894" href="TuringMachine3.html#12894" class="Function">fix-M₂</a> <a id="12901" class="Symbol">:</a> <a id="12903" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="12906" class="Symbol">(</a><a id="12907" class="Number">1</a> <a id="12909" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12911" href="TuringMachine3.html#12721" class="Bound">n&#39;</a> <a id="12914" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12916" href="TuringMachine3.html#12717" class="Bound">n</a><a id="12917" class="Symbol">)</a> <a id="12919" href="TuringMachine3.html#12726" class="Bound">m</a>
    <a id="12925" href="TuringMachine3.html#12894" class="Function">fix-M₂</a> <a id="12932" class="Symbol">=</a> <a id="12934" href="Basic.html#2415" class="Function">coerce</a> <a id="12941" class="Symbol">(</a><a id="12942" href="Relation.Binary.PropositionalEquality.Core.html#1130" class="Function">cong</a> <a id="12947" class="Symbol">(λ</a> <a id="12950" href="TuringMachine3.html#12950" class="Bound">x</a> <a id="12952" class="Symbol">→</a> <a id="12954" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="12957" href="TuringMachine3.html#12950" class="Bound">x</a> <a id="12959" href="TuringMachine3.html#12726" class="Bound">m</a><a id="12960" class="Symbol">)</a> <a id="12962" class="Symbol">(</a><a id="12963" href="Data.Nat.Properties.html#13395" class="Function">+-comm</a> <a id="12970" href="TuringMachine3.html#12717" class="Bound">n</a> <a id="12972" class="Symbol">(</a><a id="12973" class="Number">1</a> <a id="12975" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="12977" href="TuringMachine3.html#12721" class="Bound">n&#39;</a><a id="12979" class="Symbol">)))</a> <a id="12983" class="Symbol">(</a><a id="12984" href="TuringMachine3.html#11273" class="Function">TM-raise+</a> <a id="12994" href="TuringMachine3.html#12717" class="Bound">n</a> <a id="12996" href="TuringMachine3.html#12732" class="Bound">M₂</a><a id="12998" class="Symbol">)</a>

    <a id="13005" class="Comment">{-
      If the action of M₁ would have been to halt, then the action of M₂∘M₁ will be to
      set the state to n (equivalent to state 0 of M₂), leave the tape symbol unchanged, and move right,
      otherwise just do the normal action of M₁.
    -}</a>
    <a id="13260" href="TuringMachine3.html#13260" class="Function">switch</a> <a id="13267" class="Symbol">:</a> <a id="13269" href="Data.Fin.Base.html#1126" class="Datatype">Fin</a> <a id="13273" href="TuringMachine3.html#12726" class="Bound">m</a> <a id="13275" class="Symbol">→</a> <a id="13277" href="TuringMachine3.html#741" class="Function">TM-action</a> <a id="13287" class="Symbol">(</a><a id="13288" class="Number">1</a> <a id="13290" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="13292" href="TuringMachine3.html#12721" class="Bound">n&#39;</a> <a id="13295" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="13297" href="TuringMachine3.html#12717" class="Bound">n</a><a id="13298" class="Symbol">)</a> <a id="13300" href="TuringMachine3.html#12726" class="Bound">m</a> <a id="13302" class="Symbol">→</a> <a id="13304" href="TuringMachine3.html#423" class="Function">TM-transition</a> <a id="13318" class="Symbol">(</a><a id="13319" class="Number">1</a> <a id="13321" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="13323" href="TuringMachine3.html#12721" class="Bound">n&#39;</a> <a id="13326" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="13328" href="TuringMachine3.html#12717" class="Bound">n</a><a id="13329" class="Symbol">)</a> <a id="13331" href="TuringMachine3.html#12726" class="Bound">m</a>
    <a id="13337" href="TuringMachine3.html#13260" class="Function">switch</a> <a id="13344" href="TuringMachine3.html#13344" class="Bound">s</a> <a id="13346" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a> <a id="13354" class="Symbol">=</a> <a id="13356" class="Symbol">(</a><a id="13357" href="Data.Fin.Base.html#1973" class="Function">fromℕ&lt;</a> <a id="13364" class="Symbol">(</a><a id="13365" href="Util.Arithmetic.html#2707" class="Function">m&lt;1+n+m</a> <a id="13373" href="TuringMachine3.html#12717" class="Bound">n</a> <a id="13375" href="TuringMachine3.html#12721" class="Bound">n&#39;</a><a id="13377" class="Symbol">))</a> <a id="13380" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="13382" class="Symbol">(</a><a id="13383" href="TuringMachine3.html#13344" class="Bound">s</a> <a id="13385" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="13387" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="13391" class="Symbol">)</a>
    <a id="13397" href="TuringMachine3.html#13260" class="Function">switch</a> <a id="13404" href="TuringMachine3.html#13404" class="Bound">s</a> <a id="13406" class="Symbol">(</a><a id="13407" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="13412" href="TuringMachine3.html#13412" class="Bound">transition</a><a id="13422" class="Symbol">)</a> <a id="13424" class="Symbol">=</a> <a id="13426" href="TuringMachine3.html#13412" class="Bound">transition</a>

    <a id="13442" class="Comment">{-
      If the state q is less than n, then do the action M₁ (with the appropriate `switch` if the action
      would have been to halt), otherwise do the action of M₂.
    -}</a>
    <a id="13623" href="TuringMachine3.html#13623" class="Function">M₁,₂</a> <a id="13628" class="Symbol">:</a> <a id="13630" href="TuringMachine3.html#1259" class="Function">TM</a> <a id="13633" class="Symbol">(</a><a id="13634" class="Number">1</a> <a id="13636" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="13638" href="TuringMachine3.html#12721" class="Bound">n&#39;</a> <a id="13641" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="13643" href="TuringMachine3.html#12717" class="Bound">n</a><a id="13644" class="Symbol">)</a> <a id="13646" href="TuringMachine3.html#12726" class="Bound">m</a>
    <a id="13652" href="TuringMachine3.html#13623" class="Function">M₁,₂</a> <a id="13657" class="Symbol">(</a><a id="13658" href="TuringMachine3.html#13658" class="Bound">q</a> <a id="13660" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="13662" href="TuringMachine3.html#13662" class="Bound">s</a><a id="13663" class="Symbol">)</a> <a id="13665" class="Symbol">=</a>
      <a id="13673" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="13676" class="Symbol">(</a><a id="13677" href="Util.Fin.html#2374" class="Function">Fin-lt</a> <a id="13684" href="TuringMachine3.html#13658" class="Bound">q</a> <a id="13686" href="TuringMachine3.html#12717" class="Bound">n</a><a id="13687" class="Symbol">)</a> <a id="13689" href="Data.Bool.Base.html#1283" class="Function Operator">then</a>
        <a id="13702" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="13707" class="Symbol">(</a><a id="13708" href="TuringMachine3.html#13260" class="Function">switch</a> <a id="13715" href="TuringMachine3.html#13662" class="Bound">s</a> <a id="13717" class="Symbol">(</a><a id="13718" href="TuringMachine3.html#12828" class="Function">fix-M₁</a> <a id="13725" class="Symbol">(</a><a id="13726" href="TuringMachine3.html#13658" class="Bound">q</a> <a id="13728" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="13730" href="TuringMachine3.html#13662" class="Bound">s</a><a id="13731" class="Symbol">)))</a>
      <a id="13741" href="Data.Bool.Base.html#1283" class="Function Operator">else</a>
        <a id="13754" href="TuringMachine3.html#12894" class="Function">fix-M₂</a> <a id="13761" class="Symbol">(</a><a id="13762" href="TuringMachine3.html#13658" class="Bound">q</a> <a id="13764" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="13766" href="TuringMachine3.html#13662" class="Bound">s</a><a id="13767" class="Symbol">)</a>
</pre></body></html>